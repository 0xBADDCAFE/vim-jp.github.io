---
layout: post
category: blog
title: 新正規表現エンジンのテスターを募集しています。
---

先日 vim のパッチレベルが [1000](https://groups.google.com/forum/#!topic/vim_dev/3pneQXQ2GAo) を超えました。当初は 999 で 7.3 を終え、7.4 のαバージョンがリリースされる予定でしたが、Bram 氏の意向によりしばらくは 1000 以降も 7.3 のパッチが提供される事となりました。
7.4 を楽しみにしておられた方には残念ですが、今しばらくお待ちください。
さて先日、パッチ 7.3.970 にて新しい正規表現エンジンが導入されました。[NFA(非決定性有限オートマトン)](http://ja.wikipedia.org/wiki/%E9%9D%9E%E6%B1%BA%E5%AE%9A%E6%80%A7%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3)を使う事で若干高速化がなされています。
しかしながら幾分バギーであり、現在開発者フォーラム vim\_dev にて改善が行われています。
この新しい正規表現エンジンは現在デフォルトで有効になっており、幾らかバグも報告されています。「十分にテストをしてくれる人がいないのでこうしている。安定板は 7.3.969 を使って欲しい。」と Bram 氏が言っています。この新しい正規表現エンジンを無効にするには vimrc で

```
set regexpengine=1
```

とします。値は

* 0 新正規表現エンジンで失敗したら旧正規表現エンジンにバックトラックする
* 1 旧正規表現エンジンのみを使う
* 2 新正規表現エンジンのみを使う

となります。0 を設定する事で本来であればきちんとバックトラックされるはずが、幾らかバグがある様です。
心配な方は 1 を設定して下さい。

現在 vim-jp でもこの新正規表現エンジンの修正に苦戦しています。そこで vim 7.4 のリリースに先駆けて皆さんに協力をお願いしたいと思います。
設定を

```
set regexpengine=0
```

にした状態で、元の動作(regexpengine=1)と異なる物を発見された方は以下のissueにご報告下さい。

https://github.com/vim-jp/issues/issues/390

また vim のソースを見て直せると思った方がいらっしゃれば、遠慮なく以下のissueに参加下さい。

https://github.com/vim-jp/issues/issues/391

皆さんのご協力をお待ちしています。

